<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Ver.3 ì„œë°”ì´ë²Œ ìº£: í‚¤í‚¤ì˜ ë°¤</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="gameContainer">
        <!-- ìƒë‹¨ UI: KIKI í˜„í™© + ì•„ì´í…œ/ë²„í”„ í˜„í™© -->
        <div id="statusBar">
          <div class="infoPanel">
            <h3 class="info-title">KIKI í˜„í™©</h3>
            <div class="bar-group">
              <div class="bar-label" id="healthText">HP: 100/100</div>
              <div class="bar-bg"><div class="bar-fill" id="healthFill"></div></div>
            </div>
            <span id="timeDisplay" class="info-time">ì‹œê°„: 00:00</span>
            <span id="levelDisplay">ë ˆë²¨: 1</span>
            <div class="bar-group">
              <div class="bar-label" id="expText">XP: 0/100</div>
              <div class="bar-bg"><div class="bar-fill xp" id="expFill"></div></div>
            </div>
            <span id="scoreDisplay">ì ìˆ˜: 0</span>
          </div>
          <div id="upgradeBuffPanel">
            <h3>ë‚´ ì—…ê·¸ë ˆì´ë“œ/ë²„í”„</h3>
            <div id="upgradeInfo">
              <div>ë¬´ê¸° ê°•í™”: <span id="upgradeWeapon">0</span>íšŒ</div>
              <div>ì²´ë ¥ ì¦ê°€: <span id="upgradeHp">0</span>íšŒ</div>
              <div>ì´ë™ì†ë„: <span id="upgradeSpeed">0</span>íšŒ</div>
            </div>
            <div id="buffInfo"></div>
          </div>
        </div>
        
        <!-- ê²Œì„ ìº”ë²„ìŠ¤ -->
        <canvas id="gameCanvas" width="800" height="600"></canvas>

        <!-- ë ˆë²¨ì—… UI (ì²˜ìŒì—ëŠ” ìˆ¨ê¹€) -->
        <div id="levelUpModal" class="modal">
            <div class="modal-content">
                <h2>ğŸ‰ ë ˆë²¨ì—…!</h2>
                <p>ì—…ê·¸ë ˆì´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
                <div id="upgradeOptions">
                    <button class="upgrade-btn" data-upgrade="0">
                        <strong>ë¬´ê¸° ê°•í™”</strong>
                        <br>ê³µê²©ë ¥ +20%
                    </button>
                    <button class="upgrade-btn" data-upgrade="1">
                        <strong>ì²´ë ¥ ì¦ê°€</strong>
                        <br>ìµœëŒ€ HP +30
                    </button>
                    <button class="upgrade-btn" data-upgrade="2">
                        <strong>ì´ë™ ì†ë„</strong>
                        <br>ì†ë„ +15%
                    </button>
                </div>
            </div>
        </div>

        <!-- ê²Œì„ ì˜¤ë²„ UI -->
        <div id="gameOverModal" class="modal">
            <div class="modal-content">
                <h2>ğŸ’€ ê²Œì„ ì˜¤ë²„</h2>
                <p id="survivalTime">ìƒì¡´ ì‹œê°„: 00:00</p>
                <p id="finalScore">ìµœì¢… ì ìˆ˜: 0</p>
                <button id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
            </div>
        </div>

        <!-- ê²Œì„ í´ë¦¬ì–´ UI -->
        <div id="gameClearModal" class="modal">
            <div class="modal-content">
                <h2>ğŸŠ ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
                <p>10ë¶„ ìƒì¡´ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤!</p>
                <p id="clearTime">ìƒì¡´ ì‹œê°„: 10:00</p>
                <p id="clearScore">ìµœì¢… ì ìˆ˜: 0</p>
                <button id="continueBtn">ê³„ì† í”Œë ˆì´</button>
                <button id="restartClearBtn">ë‹¤ì‹œ ì‹œì‘</button>
            </div>
        </div>

        <!-- ì¡°ì‘ ì•ˆë‚´ -->
        <div id="controls">
            <p>ğŸ® ì¡°ì‘: WASDë¡œ ì´ë™ | ğŸ¯ ìë™ ê³µê²©</p>
        </div>

        <!-- ë¡œë”©/ì˜¤ë¥˜ í‘œì‹œ -->
        <div id="loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; color: white; font-size: 18px;">
            ğŸ® ê²Œì„ ë¡œë”© ì¤‘...
        </div>

        <!-- ëª¨ë°”ì¼ ì „ìš© ì‹­ì ë°©í–¥í‚¤ -->
        <div id="mobileDPad">
          <button class="dpad-btn" id="dpad-up">â–²</button>
          <button class="dpad-btn" id="dpad-left">â—€</button>
          <button class="dpad-btn" id="dpad-right">â–¶</button>
          <button class="dpad-btn" id="dpad-down">â–¼</button>
        </div>
    </div>

    <script>
        // ì˜¤ë¥˜ ê°ì§€ë¥¼ ìœ„í•œ ì „ì—­ ì˜¤ë¥˜ í•¸ë“¤ëŸ¬
        window.addEventListener('error', function(e) {
            console.error('ê²Œì„ ì˜¤ë¥˜:', e.error);
            document.getElementById('loading').innerHTML = 'âŒ ê²Œì„ ë¡œë”© ì‹¤íŒ¨: ' + e.message + '<br><button onclick="location.reload()">ìƒˆë¡œê³ ì¹¨</button>';
        });

        // DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë”© ì™„ë£Œ, ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹œì‘...');
            
            // ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë”©
            const script = document.createElement('script');
            script.src = 'script.js';
            script.onload = function() {
                console.log('ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì™„ë£Œ!');
                document.getElementById('loading').style.display = 'none';
            };
            script.onerror = function() {
                console.error('script.js ë¡œë”© ì‹¤íŒ¨!');
                document.getElementById('loading').innerHTML = 'âŒ script.js íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!<br><button onclick="location.reload()">ìƒˆë¡œê³ ì¹¨</button>';
            };
            document.head.appendChild(script);
        });

        // ëª¨ë°”ì¼ ì „ìš© ì‹­ì ë°©í–¥í‚¤ ì´ë²¤íŠ¸ ì¶”ê°€
        const dpadButtons = document.querySelectorAll('.dpad-btn');
        dpadButtons.forEach(btn => {
            btn.addEventListener('mousedown', e => {
                e.preventDefault();
                console.log('mousedown', btn.id);
            });
            btn.addEventListener('mouseup', e => {
                e.preventDefault();
                console.log('mouseup', btn.id);
            });
        });
    </script>
</body>
</html> 